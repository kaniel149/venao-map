<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Playa Venao Real Estate Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{--sidebar-w:340px;--dark:#1a1a2e;--darker:#16213e;--accent:#0f3460;--highlight:#e94560}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',system-ui,sans-serif;overflow:hidden;height:100vh}
#map{position:absolute;top:48px;left:var(--sidebar-w);right:0;bottom:0;z-index:1;transition:left .3s}
#stats{height:48px;background:var(--darker);color:#fff;display:flex;align-items:center;padding:0 16px;gap:24px;font-size:13px;position:relative;z-index:1000}
.stat-item{display:flex;align-items:center;gap:6px}.stat-val{font-weight:700;font-size:16px}
.stat-dot{width:10px;height:10px;border-radius:50%;display:inline-block}
#sidebar{position:absolute;top:48px;left:0;bottom:0;width:var(--sidebar-w);background:var(--dark);color:#fff;overflow-y:auto;z-index:999;transition:left .3s;display:flex;flex-direction:column}
#sidebar.closed{left:calc(-1 * var(--sidebar-w))}
#sidebar.closed~#map{left:0}
#hamburger{display:none;position:fixed;top:6px;left:8px;z-index:1001;background:var(--accent);border:none;color:#fff;font-size:22px;padding:4px 10px;border-radius:6px;cursor:pointer}
.sb-section{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.sb-section h3{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:#aaa;margin-bottom:10px}
.cb-group label{display:flex;align-items:center;gap:8px;font-size:13px;margin-bottom:6px;cursor:pointer}
.cb-group input[type=checkbox]{accent-color:var(--highlight)}
select,input[type=text]{width:100%;padding:7px 10px;border-radius:6px;border:1px solid rgba(255,255,255,.15);background:var(--darker);color:#fff;font-size:13px;outline:none}
input[type=range]{width:100%;accent-color:var(--highlight)}
#parcel-list{flex:1;overflow-y:auto;padding:8px 12px}
.parcel-item{padding:8px 10px;border-radius:6px;margin-bottom:4px;cursor:pointer;font-size:12px;transition:background .2s}
.parcel-item:hover{background:rgba(255,255,255,.1)}
.parcel-item .pi-name{font-weight:600;font-size:13px}.parcel-item .pi-meta{color:#aaa;margin-top:2px}
.legend-box{background:rgba(26,26,46,.92);color:#fff;padding:12px 16px;border-radius:8px;font-size:12px;line-height:2}
.legend-box i{display:inline-block;width:14px;height:14px;border-radius:3px;margin-right:6px;vertical-align:middle}
.leaflet-popup-content{font-size:13px;line-height:1.6;min-width:220px}
.popup-title{font-size:15px;font-weight:700;margin-bottom:6px;color:#1a1a2e}
.popup-badge{display:inline-block;padding:2px 8px;border-radius:10px;font-size:11px;font-weight:600;color:#fff;margin-bottom:6px}
.popup-row{display:flex;justify-content:space-between;padding:2px 0;border-bottom:1px solid #eee}
.popup-row:last-child{border:none}
@media(max-width:768px){
  #sidebar{width:280px;--sidebar-w:280px}
  #map{left:0!important}
  #hamburger{display:block}
  #sidebar{left:-280px}
  #sidebar.open{left:0}
}
</style>
</head>
<body>
<button id="hamburger" onclick="document.getElementById('sidebar').classList.toggle('open')">‚ò∞</button>

<div id="stats">
  <div class="stat-item"><span class="stat-val" id="s-total">0</span> Total</div>
  <div class="stat-item"><span class="stat-dot" style="background:#2ecc71"></span><span class="stat-val" id="s-avail">0</span> Available</div>
  <div class="stat-item"><span class="stat-dot" style="background:#e74c3c"></span><span class="stat-val" id="s-sold">0</span> Sold</div>
  <div class="stat-item"><span class="stat-dot" style="background:#f39c12"></span><span class="stat-val" id="s-contract">0</span> Contract</div>
  <div class="stat-item" style="margin-left:auto"><span class="stat-val" id="s-value">$0</span> Total Value</div>
</div>

<div id="sidebar">
  <div class="sb-section">
    <h3>üèñ Playa Venao Real Estate</h3>
    <p style="font-size:12px;color:#aaa">Interactive parcel map ‚Äî click parcels for details</p>
  </div>
  <div class="sb-section">
    <h3>Status Filter</h3>
    <div class="cb-group">
      <label><input type="checkbox" checked data-status="Available"> üü¢ Available</label>
      <label><input type="checkbox" checked data-status="Sold"> üî¥ Sold</label>
      <label><input type="checkbox" checked data-status="Under Contract"> üü† Under Contract</label>
      <label><input type="checkbox" checked data-status="Not for Sale"> ‚ö™ Not for Sale</label>
    </div>
  </div>
  <div class="sb-section">
    <h3>Type</h3>
    <select id="f-type"><option value="">All Types</option><option>Lot</option><option>House</option><option>Condo</option><option>Commercial</option></select>
  </div>
  <div class="sb-section">
    <h3>Price Range</h3>
    <input type="range" id="f-price" min="0" max="1000000" step="5000" value="1000000">
    <div style="font-size:12px;color:#aaa;margin-top:4px">Up to $<span id="price-label">1,000,000</span></div>
  </div>
  <div class="sb-section">
    <h3>Search Owner</h3>
    <input type="text" id="f-owner" placeholder="Search by owner name...">
  </div>
  <div class="sb-section" style="flex:0 0 auto"><h3>Parcels</h3></div>
  <div id="parcel-list"></div>
</div>

<div id="map"></div>

<script>
const parcels=[
  {id:"PV-001",name:"Beachfront Lot A",owner:"Unknown",status:"Available",price:145000,size:850,date:null,type:"Lot",notes:"Prime beachfront, 50m to water",coords:[[-80.1680,7.4355],[-80.1672,7.4355],[-80.1672,7.4348],[-80.1680,7.4348]]},
  {id:"PV-002",name:"Beachfront Lot B",owner:"Unknown",status:"Available",price:135000,size:780,date:null,type:"Lot",notes:"Adjacent to Lot A, partial ocean view",coords:[[-80.1672,7.4355],[-80.1664,7.4355],[-80.1664,7.4348],[-80.1672,7.4348]]},
  {id:"PV-003",name:"Kaniel & Omri Villa",owner:"Kaniel & Omri",status:"Not for Sale",price:480000,size:1200,date:"2025-03-15",type:"House",notes:"Modern 3BR villa, ocean panorama",coords:[[-80.1660,7.4360],[-80.1650,7.4360],[-80.1650,7.4352],[-80.1660,7.4352]]},
  {id:"PV-004",name:"Kaniel & Omri Hillside",owner:"Kaniel & Omri",status:"Not for Sale",price:95000,size:2400,date:"2025-06-01",type:"Lot",notes:"Future development site, hilltop with 360¬∞ views",coords:[[-80.1645,7.4382],[-80.1633,7.4382],[-80.1633,7.4374],[-80.1645,7.4374]]},
  {id:"PV-005",name:"Venao Beach Resort",owner:"Ami & Uri",status:"Not for Sale",price:750000,size:3500,date:"2024-11-20",type:"Commercial",notes:"Boutique surf resort, 12 rooms, restaurant",coords:[[-80.1690,7.4365],[-80.1678,7.4365],[-80.1678,7.4356],[-80.1690,7.4356]]},
  {id:"PV-006",name:"Ami & Uri Cabanas",owner:"Ami & Uri",status:"Not for Sale",price:320000,size:1800,date:"2025-01-10",type:"Commercial",notes:"6 rental cabanas, fully booked year-round",coords:[[-80.1695,7.4375],[-80.1685,7.4375],[-80.1685,7.4366],[-80.1695,7.4366]]},
  {id:"PV-007",name:"Sunset Ridge Lot",owner:"Unknown",status:"Available",price:65000,size:1100,date:null,type:"Lot",notes:"Elevated lot with sunset views, road access",coords:[[-80.1625,7.4390],[-80.1615,7.4390],[-80.1615,7.4383],[-80.1625,7.4383]]},
  {id:"PV-008",name:"Village Center Shop",owner:"Carlos Mendez",status:"Sold",price:210000,size:400,date:"2024-08-05",type:"Commercial",notes:"Retail space in village center, rented",coords:[[-80.1658,7.4372],[-80.1650,7.4372],[-80.1650,7.4367],[-80.1658,7.4367]]},
  {id:"PV-009",name:"Hilltop Estate",owner:"Sarah & James K.",status:"Sold",price:520000,size:3000,date:"2023-12-01",type:"House",notes:"Luxury 4BR, pool, guest house",coords:[[-80.1635,7.4395],[-80.1620,7.4395],[-80.1620,7.4386],[-80.1635,7.4386]]},
  {id:"PV-010",name:"Surfer's Condo #1",owner:"Unknown",status:"Available",price:89000,size:65,date:null,type:"Condo",notes:"1BR condo, walk to beach, furnished",coords:[[-80.1668,7.4368],[-80.1662,7.4368],[-80.1662,7.4363],[-80.1668,7.4363]]},
  {id:"PV-011",name:"Surfer's Condo #2",owner:"Mike Torres",status:"Under Contract",price:92000,size:70,date:null,type:"Condo",notes:"1BR condo, pool access, closing Q1 2026",coords:[[-80.1662,7.4368],[-80.1656,7.4368],[-80.1656,7.4363],[-80.1662,7.4363]]},
  {id:"PV-012",name:"Jungle Lot East",owner:"Unknown",status:"Available",price:38000,size:1500,date:null,type:"Lot",notes:"Jungle setting, creek border, wildlife",coords:[[-80.1610,7.4370],[-80.1598,7.4370],[-80.1598,7.4362],[-80.1610,7.4362]]},
  {id:"PV-013",name:"Playa Venao Eco-Lodge",owner:"Green Ventures LLC",status:"Sold",price:380000,size:2200,date:"2024-03-22",type:"Commercial",notes:"Eco-lodge, 8 units, solar powered",coords:[[-80.1700,7.4358],[-80.1691,7.4358],[-80.1691,7.4350],[-80.1700,7.4350]]},
  {id:"PV-014",name:"Oceanview Lot C",owner:"Unknown",status:"Available",price:78000,size:920,date:null,type:"Lot",notes:"Gentle slope, filtered ocean view",coords:[[-80.1648,7.4360],[-80.1640,7.4360],[-80.1640,7.4354],[-80.1648,7.4354]]},
  {id:"PV-015",name:"Casa del Sol",owner:"Rivera Family",status:"Sold",price:295000,size:600,date:"2025-01-30",type:"House",notes:"Charming 2BR, renovated 2024, garden",coords:[[-80.1655,7.4378],[-80.1647,7.4378],[-80.1647,7.4373],[-80.1655,7.4373]]},
  {id:"PV-016",name:"Kaniel & Omri Beach Parcel",owner:"Kaniel & Omri",status:"Not for Sale",price:195000,size:1050,date:"2025-02-14",type:"Lot",notes:"Beachfront reserve, future cabana project",coords:[[-80.1680,7.4348],[-80.1670,7.4348],[-80.1670,7.4341],[-80.1680,7.4341]]},
  {id:"PV-017",name:"Mountain View Lot",owner:"Unknown",status:"Available",price:42000,size:1800,date:null,type:"Lot",notes:"Highest elevation available, road planned",coords:[[-80.1615,7.4400],[-80.1603,7.4400],[-80.1603,7.4393],[-80.1615,7.4393]]},
  {id:"PV-018",name:"Fisherman's Wharf",owner:"Pedro Gonzalez",status:"Under Contract",price:175000,size:500,date:null,type:"Commercial",notes:"Restaurant/bar, beachfront, needs renovation",coords:[[-80.1705,7.4350],[-80.1700,7.4350],[-80.1700,7.4344],[-80.1705,7.4344]]},
  {id:"PV-019",name:"Palm Garden Villa",owner:"Unknown",status:"Available",price:55000,size:700,date:null,type:"Lot",notes:"Village lot, flat, utilities ready",coords:[[-80.1645,7.4370],[-80.1638,7.4370],[-80.1638,7.4365],[-80.1645,7.4365]]},
  {id:"PV-020",name:"Ami & Uri Expansion",owner:"Ami & Uri",status:"Not for Sale",price:120000,size:1600,date:"2025-04-01",type:"Lot",notes:"Resort expansion parcel, spa planned",coords:[[-80.1690,7.4376],[-80.1680,7.4376],[-80.1680,7.4369],[-80.1690,7.4369]]}
];

const statusColors={Available:'#2ecc71',Sold:'#e74c3c','Under Contract':'#f39c12','Not for Sale':'#95a5a6'};
const badgeColors={Available:'#27ae60',Sold:'#c0392b','Under Contract':'#e67e22','Not for Sale':'#7f8c8d'};

const map=L.map('map',{zoomControl:false}).setView([7.4367,-80.1647],16);
L.control.zoom({position:'topright'}).addTo(map);

const satellite=L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{attribution:'Esri',maxZoom:19});
const osm=L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap',maxZoom:19});
satellite.addTo(map);
L.control.layers({'üõ∞ Satellite':satellite,'üó∫ Street Map':osm},{},position='topright').addTo(map);

// Legend
const legend=L.control({position:'bottomright'});
legend.onAdd=function(){const d=L.DomUtil.create('div','legend-box');d.innerHTML='<b>Legend</b><br><i style="background:#2ecc71"></i>Available<br><i style="background:#e74c3c"></i>Sold<br><i style="background:#f39c12"></i>Under Contract<br><i style="background:#95a5a6"></i>Not for Sale';return d};
legend.addTo(map);

const layers={};
parcels.forEach(p=>{
  const poly=p.coords.map(c=>[c[1],c[0]]);
  const layer=L.polygon(poly,{color:statusColors[p.status],fillColor:statusColors[p.status],fillOpacity:.35,weight:2}).addTo(map);
  layer.on('mouseover',function(){this.setStyle({fillOpacity:.6,weight:3})});
  layer.on('mouseout',function(){this.setStyle({fillOpacity:.35,weight:2})});
  const priceF='$'+p.price.toLocaleString();
  const dateRow=p.date?`<div class="popup-row"><span>Purchased</span><span>${p.date}</span></div>`:'';
  layer.bindPopup(`<div class="popup-title">${p.name}</div><span class="popup-badge" style="background:${badgeColors[p.status]}">${p.status}</span><div class="popup-row"><span>ID</span><span>${p.id}</span></div><div class="popup-row"><span>Owner</span><span>${p.owner}</span></div><div class="popup-row"><span>Price</span><span>${priceF}</span></div><div class="popup-row"><span>Size</span><span>${p.size.toLocaleString()} m¬≤</span></div><div class="popup-row"><span>Type</span><span>${p.type}</span></div>${dateRow}<div class="popup-row"><span>Notes</span><span style="max-width:150px;text-align:right">${p.notes}</span></div>`,{maxWidth:300});
  layers[p.id]=layer;
});

function updateStats(visible){
  document.getElementById('s-total').textContent=visible.length;
  document.getElementById('s-avail').textContent=visible.filter(p=>p.status==='Available').length;
  document.getElementById('s-sold').textContent=visible.filter(p=>p.status==='Sold').length;
  document.getElementById('s-contract').textContent=visible.filter(p=>p.status==='Under Contract').length;
  const total=visible.reduce((s,p)=>s+p.price,0);
  document.getElementById('s-value').textContent='$'+total.toLocaleString();
}

function applyFilters(){
  const statuses=[...document.querySelectorAll('[data-status]')].filter(c=>c.checked).map(c=>c.dataset.status);
  const type=document.getElementById('f-type').value;
  const maxPrice=+document.getElementById('f-price').value;
  const ownerQ=document.getElementById('f-owner').value.toLowerCase();
  document.getElementById('price-label').textContent=maxPrice.toLocaleString();
  const visible=[];
  parcels.forEach(p=>{
    const show=statuses.includes(p.status)&&(!type||p.type===type)&&p.price<=maxPrice&&(!ownerQ||p.owner.toLowerCase().includes(ownerQ));
    if(show){map.addLayer(layers[p.id]);visible.push(p)}else{map.removeLayer(layers[p.id])}
  });
  updateStats(visible);
  renderList(visible);
}

function renderList(list){
  const el=document.getElementById('parcel-list');
  el.innerHTML=list.map(p=>`<div class="parcel-item" onclick="flyTo('${p.id}')"><div class="pi-name" style="color:${statusColors[p.status]}">${p.name}</div><div class="pi-meta">${p.type} ¬∑ $${p.price.toLocaleString()} ¬∑ ${p.size.toLocaleString()}m¬≤</div></div>`).join('');
}

function flyTo(id){
  const layer=layers[id];
  map.flyToBounds(layer.getBounds().pad(0.5),{duration:.5});
  layer.openPopup();
  if(window.innerWidth<768)document.getElementById('sidebar').classList.remove('open');
}

document.querySelectorAll('[data-status],#f-type,#f-price,#f-owner').forEach(el=>el.addEventListener('input',applyFilters));
applyFilters();
</script>
</body>
</html>
